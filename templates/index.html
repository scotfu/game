<!DOCTYPE HTML>
<html>
<head>
<link rel="stylesheet" href="static/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="static/css/bootstrap-theme.min.css">

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Game</title>

</head>
<body>
<h1 class="text-center">Game</h1>
<div class="container">
<h3 class="timer">Time: 20 seconds left</h3>

<div class="progress progress-striped active">
  <div class="progress-bar"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    <span class="sr-only">45% Complete</span>
  </div>


</div>


<div class="btn-group" data-toggle="buttons">
  <label class="btn btn-default">
    <input type="checkbox"> Shape 1
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 2
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 3
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 4
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 5
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 6
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 7
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 8
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 9
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 10
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 11
  </label>
  <label class="btn btn-default">
    <input type="checkbox"> Shape 12
  </label>
</div>

<table class="table table-bordered">
<tr><th>Player</th><th>Result</th><th>Score</th>

<!-- On cells (`td` or `th`) -->
<tr>
  <td class="active">Me</td>
  <td class="success">None</td>
  <td class="warning">None</td>

</tr>
</table>

 {% csrf_token %}
</div><!--container -->
<script src="static/js/jquery.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>



<script type="text/javascript">
time_limit=20.0;
width=0;
augment= 100.0/time_limit;

function timer(){
if(time_limit>=0){
$(".timer").html("Time: "+ time_limit.toString()+" seconds left");

//width_value = "width:"+ width.toString() +"%";
//width = width + augment;
//$(".progress-bar").attr("style",width_value);
time_limit--;
setTimeout("timer()",1000);
}
else{
$(".timer").html("Time is up");
$(".btn-default").addClass("disabled")
result = "";

$('input[type=checkbox]').each(function () {
    var sThisVal = (this.checked ? "1" : "0");
    result = result.concat(sThisVal);
});
$(".success").html(result);
$(".warning").html("TBD");
//post data to the server

$.ajax({
  type: "POST",
  url: "record/result/",
  data: {"result":result,
         "player":"test player", 
         "csrfmiddlewaretoken":$("input[name=csrfmiddlewaretoken]").val(),
},
  success: function(data) {              
//alert(data)
            },
  error : function(httpReq,status,exception){
                alert(status+" "+exception);
            }
,
  dataType: "json",
});


}
}

function pro_bar(){
if(time_limit>-1){
width = width + augment/10.0;
width_value = "width:"+ width.toString() +"%";

$(".progress-bar").attr("style",width_value);

setTimeout("pro_bar()",100);
}
else{
$(".progress-bar").attr("style","width:100%");
}
}





$(document).ready(function() {

timer();
pro_bar();
})

</script> 

</body>
</html>
